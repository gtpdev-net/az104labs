---
applyTo: '**/*.sh'
description: 'Azure CLI scripting standards for GitHub Copilot'
---

# GitHub Copilot Instructions for Azure CLI Scripts

## Purpose
Ensure all Azure CLI commands generated by GitHub Copilot follow Microsoft's latest best practices for cloud automation, resource provisioning, and scripting.

## Scope
These instructions apply to:
- Azure CLI commands embedded in Bash scripts
- Infrastructure automation using `az` commands
- GitHub Actions workflows using Azure CLI

## CLI Usage Guidelines
- Always use the `az` command-line interface
- Prefer long-form parameters (`--name`, `--location`) over short aliases
- Use `--output json` for structured output
- Use `--query` with JMESPath for filtering results

## Authentication
- Use `az login` with service principal or managed identity for automation
- Avoid interactive login in scripts
- Use `az account set --subscription` to scope operations

## Resource Management
- Use `az group create`, `az vm create`, `az storage account create`, etc.
- Validate resource existence before creation using `az resource show` or `az group exists`
- Use `--tags` to apply metadata consistently

## Parameter Passing
- Use variables and full parameter sets
- Avoid hardcoded values; prefer environment variables or script arguments
- Quote all variables in CLI commands: `"$resourceGroup"`

## Error Handling
- Use `set -euo pipefail` in Bash scripts
- Check command exit codes and handle failures
- Log errors to stderr

## GitHub Actions Compatibility
- Scripts must be non-interactive
- Accept input via environment variables or arguments
- Use exit codes and structured output for job feedback

## Example Prompt
> Generate a Bash script using Azure CLI to deploy a VM, assign a role to a managed identity, and output the public IP.

## Additional Resources
- Azure CLI Documentation
- Microsoft Learn Azure CLI documentation: https://learn.microsoft.com/en-us/cli/azure
- Azure CLI GitHub repository: https://github.com/Azure/azure-cli
- Azure CLI JMESPath query examples: https://learn.microsoft.com/en-us/cli/azure/query-azure-cli?view=azure-cli-latest
- Azure CLI Bash examples: https://learn.microsoft.com/en-us/cli/azure/examples?view=azure-cli-latest